# Helpdesk System

Система обработки заявок (тикетов) с поддержкой ролей пользователей, файловых вложений и комментариев.

## Основные возможности

### Управление пользователями

- Регистрация и аутентификация пользователей
- Ролевая система (администратор и обычный пользователь)
- JWT-аутентификация

### Управление тикетами

- Создание тикетов
- Просмотр списка всех тикетов (для администраторов)
- Просмотр своих тикетов (для пользователей)
- Фильтрация тикетов по статусу, создателю и дате
- Пагинация результатов

### Статусы тикетов

- Настраиваемая система статусов
- Базовые статусы: "Открыт", "В работе", "Закрыт"
- Управление переходами между статусами
- Автозакрытие тикетов (опционально)

### Комментарии

- Добавление комментариев к тикетам
- Просмотр истории комментариев
- Сортировка комментариев по дате

### Файловые вложения

- Загрузка файлов к тикетам
- Скачивание прикрепленных файлов
- Организация файлов по директориям

### API

- RESTful API
- Swagger документация
- Защита endpoints с помощью middleware

## Технический стек

- Go (Golang)
- Gin Web Framework
- GORM (ORM)
- PostgreSQL
- JWT для аутентификации
- Swagger для документации API

## Установка и запуск

1. Клонируйте репозиторий
2. Создайте файл `.env` на основе `.env_example`
3. Настройте подключение к базе данных в `.env`
4. Запустите миграции:
   ```bash
   go run cmd/migrate/main.go
   ```
5. Запустите сервер:
   ```bash
   go run cmd/app/main.go
   ```

## Структура проекта

```
├── api/            # API endpoints и маршрутизация
│   ├── v1/         # API версии 1
│   └── swagger/    # Swagger документация
├── cmd/            # Точки входа приложения
├── config/         # Конфигурация
├── internal/       # Внутренняя логика
│   ├── controllers/# Обработчики запросов
│   ├── models/     # Модели данных
│   ├── middlewares/# Промежуточные обработчики
│   └── services/   # Бизнес-логика
├── pkg/            # Общие пакеты
├── uploads/        # Директория для загруженных файлов
└── test/           # Тесты
```

## API Endpoints

### Аутентификация

- POST `/api/v1/register` - Регистрация нового пользователя
- POST `/api/v1/login` - Вход в систему

### Тикеты

- GET `/api/v1/tickets` - Получение списка тикетов
- POST `/api/v1/tickets` - Создание нового тикета
- GET `/api/v1/tickets/my` - Получение списка своих тикетов
- PATCH `/api/v1/tickets/:id/status` - Обновление статуса тикета
- DELETE `/api/v1/tickets/:id` - Удаление тикета (только для администраторов)

### Комментарии

- POST `/api/v1/tickets/comments` - Добавление комментария
- GET `/api/v1/tickets/:id/comments` - Получение комментариев к тикету

### Файлы

- POST `/api/v1/files/:ticket_id/upload` - Загрузка файла
- GET `/api/v1/files/:file_id/download` - Скачивание файла

## Документация API

Swagger документация доступна по адресу `/swagger/*any` после запуска сервера.
